<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·∫£n ph·∫©m | HUEphile</title>
    <style>
        /* --- CSS GI·ªÆ NGUY√äN --- */
        :root { --primary-color: #000; --accent-color: #bfa05f; --bg-color: #fff; font-family: 'Segoe UI', sans-serif; }
        body { margin: 0; padding: 0; color: #333; line-height: 1.6; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        header { text-align: center; padding: 30px; border-bottom: 1px solid #eee; }
        .brand-name { font-size: 2.5rem; font-weight: bold; margin: 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 30px; }
        .product-card { border: 1px solid #eee; display: flex; flex-direction: column; transition: 0.3s; }
        .product-card:hover { box-shadow: 0 10px 20px rgba(0,0,0,0.1); transform: translateY(-5px); }
        .product-img-container { width: 100%; height: 250px; overflow: hidden; background: #f9f9f9; }
        .product-img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .product-card:hover .product-img { transform: scale(1.05); }
        .product-info { padding: 15px; display: flex; flex-direction: column; flex-grow: 1; }
        .product-name { font-weight: bold; margin-bottom: 5px; font-size: 1.1rem; }
        .product-desc { font-size: 0.85rem; color: #666; margin-bottom: 10px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .product-price { color: var(--accent-color); font-weight: bold; margin-top: auto; }
        .btn-buy { width: 100%; padding: 10px; border: 1px solid #000; background: #fff; cursor: pointer; margin-top: 10px; text-transform: uppercase; font-size: 0.9rem; }
        .btn-buy:hover { background: #000; color: #fff; }
        
        /* CSS GI·ªé H√ÄNG & FORM */
        .cart-float { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: #000; color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; z-index: 999; }
        .cart-count { position: absolute; top: 0; right: 0; background: red; font-size: 12px; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; }
        .modal-content { background: #fff; width: 90%; max-width: 500px; padding: 25px; border-radius: 8px; max-height: 90vh; overflow-y: auto; }
        .cart-item { display: flex; justify-content: space-between; border-bottom: 1px dashed #eee; padding: 10px 0; }
        .input-group { margin-bottom: 15px; }
        .input-group input, .input-group select { width: 100%; padding: 10px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
        .btn-submit { width: 100%; padding: 12px; background: var(--accent-color); color: #fff; border: none; font-weight: bold; cursor: pointer; margin-top: 10px; }
        
        /* CSS KHU V·ª∞C CHUY·ªÇN KHO·∫¢N */
        #qr-section { display: none; text-align: center; margin-top: 15px; border: 2px solid #bfa05f; padding: 15px; background: #fffbf0; border-radius: 8px; }
        #qr-image { width: 200px; display: block; margin: 0 auto 10px; }
        .btn-bank-form { 
            display: block; width: 100%; text-align: center; padding: 12px; 
            background: #2196F3; color: white; text-decoration: none; border-radius: 4px;
            font-weight: bold; margin-top: 10px; box-sizing: border-box;
            border: 1px solid #1976D2; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .btn-bank-form:hover { background: #1976D2; }

        /* CSS B·∫£ng ph√≠ ship & Coupon */
        .price-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.95rem; }
        .price-row.total { font-weight: bold; font-size: 1.2rem; color: #bfa05f; border-top: 1px solid #eee; padding-top: 10px; margin-top: 10px; }
        .ship-note { font-size: 0.8rem; color: #666; font-style: italic; margin-bottom: 15px; }
        
        /* CSS COUPON */
        .coupon-box { display: flex; gap: 10px; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed #eee; }
        .coupon-box input { flex-grow: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        .btn-apply { padding: 8px 15px; background: #333; color: #fff; border: none; cursor: pointer; border-radius: 4px; }
        .btn-apply:hover { background: #000; }
        #coupon-msg { font-size: 0.85rem; margin-top: 5px; display: block; }
        .discount-row { color: red; font-weight: bold; }
    </style>
</head>
<body>

    <header>
        <div class="brand-name">HUEphile</div>
        <p>Chuy·ªán ng∆∞·ªùi y√™u Hu·∫ø</p>
    </header>

    <div class="container">
        <h2 style="text-align:center; margin-bottom: 40px;">Danh S√°ch S·∫£n Ph·∫©m</h2>
        <div class="product-grid">
            <div class="product-card" data-weight="250">
                <div class="product-img-container"><img src="https://banhlochuebavan.com/wp-content/uploads/2023/06/me-xung-gion-hue-7.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">M√® X·ª≠ng Gi√≤n Thi√™n H∆∞∆°ng</div>
                    <div class="product-desc">C√≥ ng∆∞·ªùi b·∫£o ng∆∞·ªùi Hu·∫ø s·ªëng ch·∫≠m, c√≥ l·∫Ω v√¨ h·ªç quen nh√¢m nhi thanh m√® x·ª≠ng n√†y.</div>
                    <div class="product-price">20.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="250">
                <div class="product-img-container"><img src="https://daivietourist.vn/wp-content/uploads/2025/04/keo-me-xung-hue-17.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">M√® X·ª≠ng Gi√≤n T√†i K√Ω</div>
                    <div class="product-desc">M√≥n qu√† c·ªßa s·ª± t·ªâ m·∫©n. T·ª´ng h·∫°t m√® v√†ng √≥ng ƒë∆∞·ª£c rang canh l·ª≠a sao cho v·ª´a ch√≠n t·ªõi.</div>
                    <div class="product-price">23.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="300">
                <div class="product-img-container"><img src="https://dacsanlamqua.com/wp-content/uploads/2021/07/Keo-me-xung-mem-thien-huong-hue.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">M√® X·ª≠ng D·∫ªo Thi√™n H∆∞∆°ng</div>
                    <div class="product-desc">"Dai nh∆∞ m√® x·ª≠ng". V·ªã ng·ªçt s·∫Øc s·∫£o c·ªßa ƒë∆∞·ªùng, c√°i b√πi b√©o c·ªßa ƒë·∫≠u ph·ªông.</div>
                    <div class="product-price">25.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="300">
                <div class="product-img-container"><img src="https://dacsanngondanang.com/wp-content/uploads/2022/08/Me-xung-Lam-Anh-hop.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">M√® X·ª≠ng D·∫ªo G·ª´ng L√¢m Anh</div>
                    <div class="product-desc">Hu·∫ø nh·ªØng ng√†y m∆∞a d·∫ßm d·ªÅ l·∫°nh th·∫•u da, kh√¥ng g√¨ ·∫•m l√≤ng h∆°n mi·∫øng m√® x·ª≠ng g·ª´ng.</div>
                    <div class="product-price">21.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="500">
                <div class="product-img-container"><img src="https://dacsanhue24h.com/wp-content/uploads/2020/03/Tom-chua-2.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">T√¥m Chua C√¥ Ri</div>
                    <div class="product-desc">M·ªôt b·∫£n giao h∆∞·ªüng c·ªßa tri·∫øt l√Ω √Çm D∆∞∆°ng. Con t√¥m ƒë·∫•t ƒë·ªè au (D∆∞∆°ng) ·ªß m√¨nh trong ri·ªÅng.</div>
                    <div class="product-price">65.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="500">
                <div class="product-img-container"><img src="https://tourhue.vn/wp-content/uploads/2024/07/tom-chua-hue-ba-due.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">T√¥m Chua B√† Du·ªá</div>
                    <div class="product-desc">M√≥n ngon t·ª´ng ƒë∆∞·ª£c ch·ªçn ƒë·ªÉ "Ti·∫øn Vua". V·ªã chua thanh, cay, ng·ªçt, m·∫∑n h√≤a quy·ªán.</div>
                    <div class="product-price">68.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="500">
                <div class="product-img-container"><img src="https://mambadue.vn/wp-content/uploads/2021/09/mam-ruoc-ba-due.png" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">M·∫Øm Ru·ªëc B√† Du·ªá</div>
                    <div class="product-desc">"ƒÇn m·∫Øm th·∫•m l√¢u". H≈© m·∫Øm m·∫∑n m√≤i g√≥i gh√©m c·∫£ v·ªã bi·ªÉn Thu·∫≠n An.</div>
                    <div class="product-price">40.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="500">
                <div class="product-img-container"><img src="https://mambadue.vn/wp-content/uploads/2021/09/mam-ro.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">M·∫Øm R√≤ B√† Du·ªá</div>
                    <div class="product-desc">T·ª´ nh·ªØng con c√° k√¨m t∆∞∆°i r√≥i nh·∫£y tanh t√°ch, qua b√†n tay kh√©o l√©o c·ªßa c√°c O, c√°c M·ªá.</div>
                    <div class="product-price">39.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="200">
                <div class="product-img-container"><img src="https://quangonxuhue.com/wp-content/uploads/2022/11/banh-ep-kho-thuan-an-hue.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">B√°nh √âp Kh√¥ Gia Di</div>
                    <div class="product-desc">Sinh ra t·ª´ nh·ªØng g√°nh h√†ng rong g√≥c ph·ªë. T·ª´ng chi·∫øc b√°nh ƒë∆∞·ª£c √©p th·ªß c√¥ng tr√™n khu√¥n gang.</div>
                    <div class="product-price">35.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="1000">
                <div class="product-img-container"><img src="https://bazantravel.com/cdn/medias/uploads/74/74698-gioi-thieu-banh-bot-loc-hue.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">B√°nh B·ªôt L·ªçc O Ri (ƒê√¥ng L·∫°nh)</div>
                    <div class="product-desc">Nh√¨n chi·∫øc b√°nh trong v·∫Øt l·ªô r√µ con t√¥m ƒë·ªè au b√™n trong, ng∆∞·ªùi ta th·∫•y c·∫£ s·ª± tinh t·∫ø.</div>
                    <div class="product-price">55.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="200">
                <div class="product-img-container"><img src="https://banhlochuebavan.com/wp-content/uploads/2023/09/Cach-pha-tra-cung-dinh-Hue.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Tr√† Cung ƒê√¨nh An Mi√™n</div>
                    <div class="product-desc">Ng√†y x∆∞a, ch·ªâ b·∫≠c ƒê·∫ø v∆∞∆°ng m·ªõi ƒë∆∞·ª£c th∆∞·ªüng th·ª©c th·ª© n∆∞·ªõc th·∫£o m·ªôc 16 v·ªã n√†y.</div>
                    <div class="product-price">60.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="200">
                <div class="product-img-container"><img src="https://banhlochuebavan.com/wp-content/uploads/2023/04/tra-hoa-sen-tinh-tam-hue.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Tr√† Sen T·ªãnh T√¢m</div>
                    <div class="product-desc">Lo√†i sen ng·ª± d·ª•ng ∆∞·ªõp v√†o tr√† xanh t·∫°o n√™n h∆∞∆°ng th∆°m thanh khi·∫øt, tho√°t t·ª•c.</div>
                    <div class="product-price">62.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="200">
                <div class="product-img-container"><img src="https://sp-ao.shortpixel.ai/client/q_lossy,ret_img,w_324,h_243/https://quahueonline.com/wp-content/uploads/2019/12/Dac-san-Hue-Tra-va-Loc-Mai-tui-loc-1-324x243.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Tr√† V·∫£ C·ªë ƒê√¥</div>
                    <div class="product-desc">T·ª´ qu·∫£ V·∫£ ch√°t ch√∫a, x√π x√¨ m·ªçc n∆°i g√≥c v∆∞·ªùn, ng∆∞·ªùi Hu·∫ø ƒë√£ bi·∫øn h√≥a th√†nh th·ª©c tr√† ng·ªçt h·∫≠u.</div>
                    <div class="product-price">63.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="100">
                <div class="product-img-container"><img src="https://phannubatunghue.vn/upload/images/quy-trinh-phoi-phan-tai-co-so-phan-nu-ba-tung-hue.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Ph·∫•n N·ª• Ng·ª´a M·ª•n B√† T√πng</div>
                    <div class="product-desc">B√≠ quy·∫øt ngh√¨n nƒÉm t·ª´ ch·ªën th√¢m cung. Vi√™n ph·∫•n n·ª• tr·∫Øng ng·∫ßn n√†y kh√¥ng ch·ªâ tr·ªã m·ª•n.</div>
                    <div class="product-price">150.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="100">
                <div class="product-img-container"><img src="https://phannubatunghue.vn/upload/images/phan-nu-ba-tung-phan-nu-tre-em.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Ph·∫•n N·ª• L·ªôt Th·∫πo B√† T√πng</div>
                    <div class="product-desc">Vi√™n ph·∫•n nh·ªè b√© mang s·ª© m·ªánh ch·ªØa l√†nh nh·ªØng v·∫øt d·∫•u th·ªùi gian tr√™n l√†n da.</div>
                    <div class="product-price">155.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="100">
                <div class="product-img-container"><img src="https://product.hstatic.net/200000719021/product/upload_a04ba8c2477b4b0aade9cb3237f34050.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Ph·∫•n N·ª• Ch·ªëng L√£o H√≥a</div>
                    <div class="product-desc">"N·ª• t·∫ßm xu√¢n n·ªü ra xanh bi·∫øc...". Vi√™n ph·∫•n n·ª• l√† s·ª± ph·∫£n kh√°ng d·ªãu d√†ng.</div>
                    <div class="product-price">160.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="100">
                <div class="product-img-container"><img src="https://product.hstatic.net/200000719021/product/phan_ma_hong_phien_ban_moi-01_87238cf37b5442d78848a9d88b6c5652.png" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Ph·∫•n M√° H·ªìng D·∫°ng N√©n</div>
                    <div class="product-desc">Kh√¥ng r·ª±c r·ª° nh∆∞ m·ªπ ph·∫©m ph∆∞∆°ng T√¢y, ph·∫•n n·ª• m√° h·ªìng mang s·∫Øc m√†u e ·∫•p.</div>
                    <div class="product-price">116.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="150">
                <div class="product-img-container"><img src="https://quahueonline.com/wp-content/uploads/2019/12/Tinh-d%E1%BA%A7u-tr%C3%A0m-Hu%E1%BA%BF-Kim-Vui-20ml-1.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Tinh D·∫ßu Tr√†m Kim Vui</div>
                    <div class="product-desc">M√πi h∆∞∆°ng n·ªìng ·∫•m ·∫•y l√† "m√πi c·ªßa M·∫°". HUEphile g·ª≠i b·∫°n chai d·∫ßu n√†y nh∆∞ g·ª≠i m·ªôt chi·∫øc chƒÉn ·∫•m.</div>
                    <div class="product-price">77.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="150">
                <div class="product-img-container"><img src="https://www.cotrang.org/public/images/tin_dang/6/87_tinh-dau-tram-hue-bk-5.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Tinh D·∫ßu Tr√†m Linh An</div>
                    <div class="product-desc">Ch·∫Øt chiu t·ª´ nh·ªØng c√°nh r·ª´ng tr√†m gi√≥ c√°t tr·∫Øng L·ªôc Th·ªßy.</div>
                    <div class="product-price">66.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="200">
                <div class="product-img-container"><img src="https://medoan.vn/wp-content/uploads/2023/10/1_Tinh-dau-Sa-chanh-Me-Doan-100ml-.webp" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">D·∫ßu Xoa B√≥p M·ªá ƒêoan</div>
                    <div class="product-desc">Chai d·∫ßu xoa b√≥p n√†y g√≥i tr·ªçn ƒë·∫°o Hi·∫øu, ƒë∆∞·ª£c ng√¢m ·ªß t·ª´ d∆∞·ª£c li·ªáu qu√Ω A L∆∞·ªõi.</div>
                    <div class="product-price">15.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="200">
                <div class="product-img-container"><img src="https://tantrico.vn/wp-content/uploads/2025/05/2023-01-14-768x576.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">T√∫i L·ªçc G·ªôi ƒê·∫ßu Kim Vui</div>
                    <div class="product-desc">H∆∞∆°ng b·ªì k·∫øt n∆∞·ªõng, h∆∞∆°ng nhu, s·∫£ chanh... quy·ªán v√†o nhau, g·ªôt r·ª≠a m·ªçi b·ª•i tr·∫ßn.</div>
                    <div class="product-price">19.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="200">
                <div class="product-img-container"><img src="https://quahueonline.com/wp-content/uploads/2021/08/Tui-loc-goi-dau-bo-ket-thao-moc-cung-dinh-Hue-Kim-Vui-2.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">T√∫i G·ªôi ƒê·∫ßu Kim Xu√¢n</div>
                    <div class="product-desc">H√†nh tr√¨nh t√¨m v·ªÅ v·ªõi thi√™n nhi√™n nguy√™n b·∫£n. M√°i t√≥c ƒë∆∞·ª£c nu√¥i d∆∞·ª°ng b·∫±ng c√¢y c·ªè qu√™ nh√†.</div>
                    <div class="product-price">19.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="300">
                <div class="product-img-container"><img src="https://airportcargo.vn/wp-content/uploads/2022/09/non_la.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">N√≥n L√° B√†i Th∆° D√¨ V√¢n</div>
                    <div class="product-desc">Soi chi·∫øc n√≥n l√™n tr·ªùi xanh, b·∫°n s·∫Ω th·∫•y nh·ªØng v·∫ßn th∆° v√† b√≥ng c·∫ßu Tr√†ng Ti·ªÅn ·∫©n hi·ªán.</div>
                    <div class="product-price">100.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="300">
                <div class="product-img-container"><img src="https://madebymaries.com/wp-content/uploads/2021/10/1-1.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">N√≥n L√° V·∫Ω Tay</div>
                    <div class="product-desc">C√°c ngh·ªá nh√¢n ƒë√£ thu nh·ªè c·∫£ kinh th√†nh, c·∫£ d√≤ng H∆∞∆°ng Giang ƒë·∫∑t l√™n v√†nh n√≥n.</div>
                    <div class="product-price">100.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="400">
                <div class="product-img-container"><img src="https://product.hstatic.net/1000399027/product/bl03-3_3cf644c3e43143c08cdd5d6a64ab0371_master.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">R·ªï Tre Bao La</div>
                    <div class="product-desc">T·ª´ nh·ªØng c√¢y tre gai g√≥c, b√†n tay ng∆∞·ªùi th·ª£ ƒë√£ chu·ªët n√™n nh·ªØng nan tre m·ªÅm m·∫°i.</div>
                    <div class="product-price">100.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="300">
                <div class="product-img-container"><img src="https://pro-check.vn/FileUploads/den-3-tang.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">ƒê√®n L·ªìng M√¢y Tre</div>
                    <div class="product-desc">Chi·∫øc ƒë√®n kh√¥ng ch·ªâ ƒë·ªÉ th·∫Øp s√°ng, n√≥ th·∫Øp l√™n s·ª± ho√†i c·ªï, ƒë∆∞a t√¢m h·ªìn t√¨m v·ªÅ b√¨nh y√™n.</div>
                    <div class="product-price">40.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="1000">
                <div class="product-img-container"><img src="https://brandgift.vn/wp-content/uploads/2023/10/binh-hoa-gom-su-bat-trang-dang-choe-hoa-tiet-hoa-sen-xanh-ve-vang-kim.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">B√¨nh Hoa Sen/C√∫c B√°t Tr√†ng</div>
                    <div class="product-desc">D√°ng b√¨nh thanh tho√°t v·ªõi h·ªça ti·∫øt Sen - C√∫c mang h∆°i th·ªü cung ƒë√¨nh.</div>
                    <div class="product-price">500.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="800">
                <div class="product-img-container"><img src="https://anthotuc.vn/wp-content/uploads/2021/05/truc-lam-600x600.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">B·ªô ·∫§m Tr√† Ph∆∞·ªõc T√≠ch</div>
                    <div class="product-desc">G·ªëm Ph∆∞·ªõc T√≠ch chinh ph·ª•c ng∆∞·ªùi d√πng b·∫±ng ch·∫•t s√†nh ƒëen b√≥ng nh∆∞ ng·ªçc.</div>
                    <div class="product-price">600.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="300">
                <div class="product-img-container"><img src="https://cdn.img.kevesko.vn/img/846/12/8461220_0:115:2731:1935_600x0_80_0_0_b59b229a82b76575a998ffac1e0115ea.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">H·ªôp Trang S·ª©c Ph√°p Lam</div>
                    <div class="product-desc">ƒê·ªânh cao c·ªßa ngh·ªá thu·∫≠t l·ª≠a v√† m√†u s·∫Øc tri·ªÅu Nguy·ªÖn.</div>
                    <div class="product-price">1.000.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="500">
                <div class="product-img-container"><img src="https://mockhang.vn/wp-content/uploads/2025/10/lu-truc-dong-phap-lam-xong-tram-cao-10-cm-2.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">L∆∞ X√¥ng Tr·∫ßm Ph√°p Lam</div>
                    <div class="product-desc">Khi l√†n kh√≥i tr·∫ßm h∆∞∆°ng t·ªèa ra t·ª´ chi·∫øc l∆∞ Ph√°p Lam tinh x·∫£o, m·ªçi phi·ªÅn n√£o d∆∞·ªùng nh∆∞ tan bi·∫øn.</div>
                    <div class="product-price">600.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="50">
                <div class="product-img-container"><img src="https://maypaperflower.com/post-images/4808131999370316852613532162715625629250414n_638833891765038806.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Hoa Sen Gi·∫•y Thanh Ti√™n</div>
                    <div class="product-desc">"Hoa sen kh√¥ng t√†n". Ng∆∞·ªùi l√†ng Thanh Ti√™n ƒë√£ g·ª≠i g·∫Øm kh√°t v·ªçng v·ªÅ c√°i ƒë·∫πp vƒ©nh c·ª≠u.</div>
                    <div class="product-price">19.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="500">
                <div class="product-img-container"><img src="https://cophuchoangthanhhue.com/wp-content/uploads/2025/06/HUNG-1994-2-scaled-e1749647312710.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">√Åo Nh·∫≠t B√¨nh ƒê·ªè (Fullset)</div>
                    <div class="product-desc">Bi·ªÉu t∆∞·ª£ng c·ªßa quy·ªÅn uy v√† ph·∫©m h·∫°nh. Kho√°c l√™n m√¨nh Nh·∫≠t B√¨nh l√† s·ªëng l·∫°i gi·∫•c m∆° v√†ng son.</div>
                    <div class="product-price">1.500.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="400">
                <div class="product-img-container"><img src="https://cotranghoangcung.com/wp-content/uploads/2021/12/145007413_3817171001700029_598781068826287243_n.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">√Åo T·∫•c Nam V·∫£i Sa H√†n</div>
                    <div class="product-desc">Chi·∫øc √°o ng≈© th√¢n tay th·ª•ng l√† hi·ªán th√¢n c·ªßa s·ª± ƒëƒ©nh ƒë·∫°c, khi√™m cung.</div>
                    <div class="product-price">1.200.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="300">
                <div class="product-img-container"><img src="https://lamia.com.vn/storage/ao-dai/ao-dai-cach-tan-tay-lo-phoi-ta-ngan-ad191-4.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">√Åo D√†i L·ª•a Minh T√¢n</div>
                    <div class="product-desc">T√† √°o d√†i l·ª•a t√≠m Hu·∫ø ƒë·∫πp nh∆∞ m·ªôt b√†i th∆° bu·ªìn man m√°c. L·ª•a m·ªÅm r·ªß xu·ªëng, t√¥n vinh n√©t ƒë·∫πp.</div>
                    <div class="product-price">1.800.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="100">
                <div class="product-img-container"><img src="https://tnj.vn/img/cms/Lac-bac-cho-be/LTT0157/lac-bac-cho-be-khac-ten-LTT0157-1-1.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Ki·ªÅng B·∫°c K·∫ø M√¥n</div>
                    <div class="product-desc">Tinh hoa c·ªßa l√†ng ngh·ªÅ kim ho√†n 300 nƒÉm tu·ªïi. Chi·∫øc ki·ªÅng b·∫°c ch·∫°m tr·ªï tinh x·∫£o.</div>
                    <div class="product-price">2.000.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="300">
                <div class="product-img-container"><img src="https://madebymaries.com/wp-content/uploads/2020/12/5-1024x1024.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">T√∫i Th·ªï C·∫©m Z√®ng A L∆∞·ªõi</div>
                    <div class="product-desc">M·ªói hoa vƒÉn tr√™n t√∫i l√† m·ªôt c√¢u chuy·ªán v·ªÅ n√∫i r·ª´ng. Mang v·∫ª ƒë·∫πp hoang s∆°, ph√≥ng kho√°ng.</div>
                    <div class="product-price">180.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="300">
                <div class="product-img-container"><img src="https://images2.thanhnien.vn/zoom/1200_630/528068263637045248/2024/3/29/edit-etsy-1711683080408854092186-292-0-1470-2250-crop-17116922791681688924529.jpeg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Gu·ªëc M·ªôc V·∫Ω Sen</div>
                    <div class="product-desc">Ti·∫øng gu·ªëc m·ªôc khua vang g·ª£i nh·ªõ v·ªÅ nh·ªØng b∆∞·ªõc ch√¢n e ·∫•p x∆∞a.</div>
                    <div class="product-price">200.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="1200">
                <div class="product-img-container"><img src="https://i.pinimg.com/736x/7b/a8/6b/7ba86bc36126273b370995ffe9aa283f.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Set Qu√† HUEphile Signature</div>
                    <div class="product-desc">Ch√∫ng m√¨nh "g√≥i gh√©m h∆∞∆°ng v·ªã C·ªë ƒë√¥". M·ªü h·ªôp ra l√† th·∫•y Hu·∫ø, th·∫•y t√¨nh, th·∫•y th∆∞∆°ng.</div>
                    <div class="product-price">800.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="1000">
                <div class="product-img-container"><img src="https://i.pinimg.com/736x/93/b0/50/93b050b109ad45f185314744d1f231ae.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Set Qu√† B√≠ Quy·∫øt Cung ƒê√¨nh</div>
                    <div class="product-desc">Li·ªáu tr√¨nh chƒÉm s√≥c to√†n di·ªán ƒë·ªÉ ng∆∞·ªùi ph·ª• n·ªØ c·ªßa b·∫°n lu√¥n r·∫°ng ng·ªùi kh√≠ ch·∫•t ƒë√†i c√°c.</div>
                    <div class="product-price">800.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="1000">
                <div class="product-img-container"><img src="https://i.pinimg.com/736x/94/10/40/94104034e1770d0fb16f172b0179a24f.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Set Qu√† Tr√† Chi·ªÅu An Y√™n</div>
                    <div class="product-desc">M·ªôt ·∫•m tr√† th∆°m, m·ªôt ch√∫t b√°nh ng·ªçt, v√† m·ªôt kho·∫£ng l·∫∑ng ƒë·ªÉ l√≤ng m√¨nh ch·∫≠m l·∫°i.</div>
                    <div class="product-price">800.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

            <div class="product-card" data-weight="1200">
                <div class="product-img-container"><img src="https://i.pinimg.com/736x/85/d0/f8/85d0f863fe2a567a2832fccb72bbd1ef.jpg" class="product-img"></div>
                <div class="product-info">
                    <div class="product-name">Set Qu√† V·ªã Ngon C·ªßa M·ªá</div>
                    <div class="product-desc">G√≥i tr·ªçn n·ªói nh·ªõ nh√†, nh·ªõ b·∫øp l·ª≠a h·ªìng c·ªßa M·ªá. Nh·ªØng m√≥n ngon d√¢n d√£ m·∫∑n m√≤i.</div>
                    <div class="product-price">800.000 ƒë</div>
                    <button class="btn-buy">Th√™m v√†o gi·ªè</button>
                </div>
            </div>

        </div>
    </div>

    <div class="cart-float" onclick="toggleCart()">
        üõí <span class="cart-count" id="cart-count">0</span>
    </div>

    <div id="cartModal" class="modal">
        <div class="modal-content">
            <h3 style="display:flex; justify-content:space-between">
                Gi·ªè H√†ng <span onclick="toggleCart()" style="cursor:pointer">&times;</span>
            </h3>
            
            <div id="cart-items"><p>Gi·ªè tr·ªëng</p></div>
            
            <div id="cart-summary" style="display:none;">
                <div class="coupon-box">
                    <input type="text" id="coupon-code" placeholder="Nh·∫≠p m√£ gi·∫£m gi√°">
                    <button class="btn-apply" onclick="applyCoupon()">√Åp d·ª•ng</button>
                </div>
                <span id="coupon-msg" style="margin-bottom:10px;"></span>

                <div class="price-row"><span>T·∫°m t√≠nh:</span> <span id="cart-subtotal">0 ƒë</span></div>
                <div class="price-row"><span>Gi·∫£m gi√°:</span> <span id="discount-amount" class="discount-row">0 ƒë</span></div>
                <div class="price-row"><span>Ph√≠ v·∫≠n chuy·ªÉn (<span id="total-weight-display">0</span>g):</span> <span id="shipping-fee">0 ƒë</span></div>
                <div class="price-row total"><span>T·ªïng thanh to√°n:</span> <span id="cart-total">0 ƒë</span></div>
            </div>

            <div id="checkout-form" style="display:none; border-top:1px solid #eee; padding-top:20px; margin-top:15px;">
                <div class="input-group"><input type="text" id="c-name" placeholder="H·ªç t√™n (*)"></div>
                <div class="input-group"><input type="tel" id="c-phone" placeholder="S·ªë ƒëi·ªán tho·∫°i (*)"></div>
                <div class="input-group"><input type="email" id="c-email" placeholder="Email nh·∫≠n th√¥ng tin (*)"></div> <div class="input-group">
                    <select id="c-province" onchange="renderCart()">
                        <option value="">-- Ch·ªçn T·ªânh/Th√†nh ph·ªë (*) --</option>
                        <option value="Th√†nh ph·ªë Hu·∫ø">Th√†nh ph·ªë Hu·∫ø</option>
                        <option value="Th√†nh ph·ªë ƒê√† N·∫µng">Th√†nh ph·ªë ƒê√† N·∫µng</option>
                        <option value="Th√†nh ph·ªë H√† N·ªôi">Th√†nh ph·ªë H√† N·ªôi</option>
                        <option value="Th√†nh ph·ªë H·ªì Ch√≠ Minh">Th√†nh ph·ªë H·ªì Ch√≠ Minh</option>
                        <option value="Th√†nh ph·ªë H·∫£i Ph√≤ng">Th√†nh ph·ªë H·∫£i Ph√≤ng</option>
                        <option value="Th√†nh ph·ªë C·∫ßn Th∆°">Th√†nh ph·ªë C·∫ßn Th∆°</option>
                        <option value="T·ªânh Tuy√™n Quang">T·ªânh Tuy√™n Quang</option>
                        <option value="T·ªânh L√†o Cai">T·ªânh L√†o Cai</option>
                        <option value="T·ªânh Th√°i Nguy√™n">T·ªânh Th√°i Nguy√™n</option>
                        <option value="T·ªânh Ph√∫ Th·ªç">T·ªânh Ph√∫ Th·ªç</option>
                        <option value="T·ªânh B·∫Øc Ninh">T·ªânh B·∫Øc Ninh</option>
                        <option value="T·ªânh H∆∞ng Y√™n">T·ªânh H∆∞ng Y√™n</option>
                        <option value="T·ªânh Ninh B√¨nh">T·ªânh Ninh B√¨nh</option>
                        <option value="T·ªânh Qu·∫£ng Tr·ªã">T·ªânh Qu·∫£ng Tr·ªã</option>
                        <option value="T·ªânh Qu·∫£ng Ng√£i">T·ªânh Qu·∫£ng Ng√£i</option>
                        <option value="T·ªânh Gia Lai">T·ªânh Gia Lai</option>
                        <option value="T·ªânh Kh√°nh Ho√†">T·ªânh Kh√°nh Ho√†</option>
                        <option value="T·ªânh L√¢m ƒê·ªìng">T·ªânh L√¢m ƒê·ªìng</option>
                        <option value="T·ªânh ƒê·∫Øk L·∫Øk">T·ªânh ƒê·∫Øk L·∫Øk</option>
                        <option value="T·ªânh ƒê·ªìng Nai">T·ªânh ƒê·ªìng Nai</option>
                        <option value="T·ªânh T√¢y Ninh">T·ªânh T√¢y Ninh</option>
                        <option value="T·ªânh Vƒ©nh Long">T·ªânh Vƒ©nh Long</option>
                        <option value="T·ªânh ƒê·ªìng Th√°p">T·ªânh ƒê·ªìng Th√°p</option>
                        <option value="T·ªânh C√† Mau">T·ªânh C√† Mau</option>
                        <option value="T·ªânh An Giang">T·ªânh An Giang</option>
                        <option value="T·ªânh Lai Ch√¢u">T·ªânh Lai Ch√¢u</option>
                        <option value="T·ªânh ƒêi·ªán Bi√™n">T·ªânh ƒêi·ªán Bi√™n</option>
                        <option value="T·ªânh S∆°n La">T·ªânh S∆°n La</option>
                        <option value="T·ªânh L·∫°ng S∆°n">T·ªânh L·∫°ng S∆°n</option>
                        <option value="T·ªânh Qu·∫£ng Ninh">T·ªânh Qu·∫£ng Ninh</option>
                        <option value="T·ªânh Thanh Ho√°">T·ªânh Thanh Ho√°</option>
                        <option value="T·ªânh Ngh·ªá An">T·ªânh Ngh·ªá An</option>
                        <option value="T·ªânh H√† Tƒ©nh">T·ªânh H√† Tƒ©nh</option>
                        <option value="T·ªânh Cao B·∫±ng">T·ªânh Cao B·∫±ng</option>
                    </select>
                </div>
                <div class="ship-note">(* Ph√≠ ship s·∫Ω thay ƒë·ªïi t√πy theo T·ªânh/Th√†nh v√† c√¢n n·∫∑ng)</div>

                <div class="input-group"><input type="text" id="c-address" placeholder="ƒê·ªãa ch·ªâ c·ª• th·ªÉ (S·ªë nh√†, ƒë∆∞·ªùng...) (*)"></div>
                
                <label style="font-weight:bold">Thanh to√°n:</label>
                <div style="margin:10px 0;">
                    <label><input type="radio" name="payment" value="Ti·ªÅn m·∫∑t" checked onchange="updateQRInfo()"> Ti·ªÅn m·∫∑t</label>
                    <label style="margin-left:15px"><input type="radio" name="payment" value="Chuy·ªÉn kho·∫£n" onchange="updateQRInfo()"> Chuy·ªÉn kho·∫£n</label>
                </div>

                <div id="qr-section">
                    <p style="color:red; font-weight:bold; margin:0">Qu√©t m√£ ƒë·ªÉ thanh to√°n</p>
                    <img id="qr-image" src="" alt="QR Code">
                    <p style="font-size:0.9rem; margin-bottom:5px">N·ªôi dung: <b id="ck-content">...</b></p>
                    
                    <a id="btn-open-form" href="#" target="_blank" class="btn-bank-form" onclick="openBankForm(event)">
                        üëâ X√ÅC NH·∫¨N ƒê√É CHUY·ªÇN KHO·∫¢N
                    </a>
                    <p style="font-size:0.8rem; color:red; margin-top:5px; font-style:italic">
                        (B·∫•m n√∫t tr√™n ƒë·ªÉ Form t·ª± ƒëi·ªÅn s·ªë ti·ªÅn v√† n·ªôi dung cho b·∫°n)
                    </p>
                </div>

                <button class="btn-submit" onclick="submitOrder()">G·ª¨I ƒê∆†N H√ÄNG</button>
            </div>
        </div>
    </div>

<script>
    // ============================================================
    // C·∫§U H√åNH LI√äN K·∫æT
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyFEFN5A0YBFywxV3u-TtwdBQqnzuBoZFSYoeWHjTthKAUtwZSAECoq-3RMW85cedo/exec"; 
    const GOOGLE_FORM_BASE_URL = "https://docs.google.com/forms/d/e/1FAIpQLSePKtRRe-Pxgdnr-p4bZcFlPv3YNPhyuCP0E-w8z58JvlggtQ/viewform";
    const ID_O_NOI_DUNG = "2064406880";
    const ID_O_SO_TIEN = "444675130";
    const MY_BANK = "MB"; 
    const MY_STK = "0862743919"; 
    const MY_NAME = "HUEPHILE"; 
    // ============================================================

    let cart = [];
    let currentCoupon = ""; // Bi·∫øn l∆∞u m√£ gi·∫£m gi√° hi·ªán t·∫°i

    document.addEventListener("DOMContentLoaded", function() {
        const btns = document.querySelectorAll('.btn-buy');
        btns.forEach(btn => {
            btn.addEventListener('click', function(e) {
                const card = e.target.closest('.product-card');
                const name = card.querySelector('.product-name').innerText;
                const priceStr = card.querySelector('.product-price').innerText;
                const price = parseInt(priceStr.replace(/\D/g, ''));
                const weight = parseInt(card.getAttribute('data-weight') || 200);
                
                addToCart(name, price, weight);
            });
        });
        document.getElementById('c-phone').addEventListener('keyup', updateQRInfo);
    });

    function addToCart(name, price, weight) {
        cart.push({name, price, weight});
        renderCart();
    }

    function removeCart(i) { cart.splice(i, 1); renderCart(); }
    function toggleCart() { 
        const modal = document.getElementById('cartModal');
        modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
    }

    // --- H√ÄM X·ª¨ L√ù COUPON ---
    function applyCoupon() {
        const codeInput = document.getElementById('coupon-code');
        const code = codeInput.value.trim().toUpperCase();
        const msg = document.getElementById('coupon-msg');

        if (code === "CHAOBANMOI" || code === "XUANVE" || code === "SINHNHATANLANH") {
            currentCoupon = code;
            msg.style.color = "green";
            msg.innerText = "√Åp d·ª•ng m√£ th√†nh c√¥ng!";
        } else if (code === "") {
            currentCoupon = "";
            msg.innerText = "";
        } else {
            currentCoupon = "";
            msg.style.color = "red";
            msg.innerText = "M√£ gi·∫£m gi√° kh√¥ng h·ª£p l·ªá!";
        }
        renderCart(); // T√≠nh to√°n l·∫°i ti·ªÅn
    }

    // --- LOGIC T√çNH PH√ç SHIP (C·∫¨P NH·∫¨T THEO DANH S√ÅCH M·ªöI) ---
    function getShippingFee(province, totalWeight) {
        if (!province) return 0;
        
        // N·∫øu d√πng m√£ CHAOBANMOI -> Mi·ªÖn ship
        if (currentCoupon === "CHAOBANMOI") return 0;

        let baseFee = 35000; // M·∫∑c ƒë·ªãnh: T·ªânh xa/Kh√°c

        // 1. Nh√≥m N·ªôi th√†nh/G·∫ßn (Hu·∫ø) - 15k
        if (province === "Th√†nh ph·ªë Hu·∫ø") {
            baseFee = 15000;
        } 
        // 2. Nh√≥m L√¢n c·∫≠n (ƒê√† N·∫µng) - 25k (Qu·∫£ng Nam ƒë√£ s√°p nh·∫≠p v√†o ƒêN n√™n t√≠nh chung)
        else if (province === "Th√†nh ph·ªë ƒê√† N·∫µng") {
            baseFee = 25000;
        }
        // 3. Nh√≥m Th√†nh ph·ªë l·ªõn (HN, HCM) - 30k
        else if (province === "Th√†nh ph·ªë H√† N·ªôi" || province === "Th√†nh ph·ªë H·ªì Ch√≠ Minh") {
            baseFee = 30000;
        }
        // C√°c t·ªânh c√≤n l·∫°i gi·ªØ nguy√™n 35k

        // Ph·ª• ph√≠ tr·ªçng l∆∞·ª£ng
        let surcharge = 0;
        if (totalWeight > 1000) {
            const extraWeight = totalWeight - 1000;
            surcharge = Math.ceil(extraWeight / 500) * 5000;
        }
        return baseFee + surcharge;
    }

    // --- C·∫¨P NH·∫¨T GIAO DI·ªÜN ---
    function renderCart() {
        document.getElementById('cart-count').innerText = cart.length;
        const container = document.getElementById('cart-items');
        const form = document.getElementById('checkout-form');
        const summary = document.getElementById('cart-summary');
        
        if(cart.length === 0) {
            container.innerHTML = "<p>Gi·ªè tr·ªëng</p>";
            form.style.display = "none";
            summary.style.display = "none";
            return;
        }

        let html = "";
        let subtotal = 0;
        let totalWeight = 0;

        cart.forEach((item, index) => {
            subtotal += item.price;
            totalWeight += item.weight;
            html += `<div class="cart-item">
                        <span>${item.name}</span>
                        <span>${item.price.toLocaleString()} ƒë <b style="color:red;cursor:pointer" onclick="removeCart(${index})">x</b></span>
                     </div>`;
        });
        container.innerHTML = html;

        // T√≠nh gi·∫£m gi√°
        let discount = 0;
        if (currentCoupon === "XUANVE") {
            discount = subtotal * 0.2; // Gi·∫£m 20%
        } else if (currentCoupon === "SINHNHATANLANH") {
            discount = subtotal * 0.5; // Gi·∫£m 50%
        }

        const province = document.getElementById('c-province').value;
        const shipFee = getShippingFee(province, totalWeight);
        const finalTotal = subtotal - discount + shipFee;

        // Hi·ªÉn th·ªã
        document.getElementById('cart-subtotal').innerText = subtotal.toLocaleString() + " ƒë";
        document.getElementById('discount-amount').innerText = "-" + discount.toLocaleString() + " ƒë";
        document.getElementById('total-weight-display').innerText = totalWeight;
        document.getElementById('shipping-fee').innerText = (shipFee === 0 && province && currentCoupon === "CHAOBANMOI") ? "Mi·ªÖn ph√≠ (Coupon)" : (shipFee > 0 ? shipFee.toLocaleString() + " ƒë" : (province ? "Mi·ªÖn ph√≠" : "---"));
        
        document.getElementById('cart-total').innerText = finalTotal.toLocaleString() + " ƒë";

        summary.style.display = "block";
        form.style.display = "block";
        updateQRInfo(); 
    }

    function updateQRInfo() {
        const payment = document.querySelector('input[name="payment"]:checked').value;
        const qrDiv = document.getElementById('qr-section');
        const totalText = document.getElementById('cart-total').innerText;
        const total = parseInt(totalText.replace(/\D/g,'')) || 0;
        
        if(payment === "Chuy·ªÉn kho·∫£n" && total > 0) {
            qrDiv.style.display = "block";
            const phone = document.getElementById('c-phone').value || "SDT";
            const contentCK = `HUEphile ${phone}`;
            document.getElementById('ck-content').innerText = contentCK;
            const qrLink = `https://img.vietqr.io/image/${MY_BANK}-${MY_STK}-compact.jpg?amount=${total}&addInfo=${encodeURIComponent(contentCK)}&accountName=${MY_NAME}`;
            document.getElementById('qr-image').src = qrLink;
        } else {
            qrDiv.style.display = "none";
        }
    }

    function openBankForm(e) {
        e.preventDefault();
        const totalText = document.getElementById('cart-total').innerText;
        const total = parseInt(totalText.replace(/\D/g,''));
        const phone = document.getElementById('c-phone').value;

        if (!phone || phone.length < 9) {
            alert("Vui l√≤ng nh·∫≠p S·ªë ƒëi·ªán tho·∫°i tr∆∞·ªõc!");
            document.getElementById('c-phone').focus();
            return;
        }
        const contentCK = `HUEphile ${phone}`; 
        const finalLink = `${GOOGLE_FORM_BASE_URL}?usp=pp_url&entry.${ID_O_SO_TIEN}=${total}&entry.${ID_O_NOI_DUNG}=${encodeURIComponent(contentCK)}`;
        window.open(finalLink, '_blank');
    }

    function submitOrder() {
        const name = document.getElementById('c-name').value;
        const phone = document.getElementById('c-phone').value;
        const email = document.getElementById('c-email').value; // L·∫§Y EMAIL
        const province = document.getElementById('c-province').value;
        const addressDetail = document.getElementById('c-address').value;
        const payment = document.querySelector('input[name="payment"]:checked').value;

        if(!name || !phone || !province || !addressDetail) { 
            alert("Vui l√≤ng ƒëi·ªÅn ƒë·ªß th√¥ng tin!"); return; 
        }

        const fullAddress = `${addressDetail}, ${province}`;
        const btn = document.querySelector('.btn-submit');
        const oldText = btn.innerText;
        btn.innerText = "ƒêANG G·ª¨I...";
        btn.disabled = true;

        const totalStr = document.getElementById('cart-total').innerText;
        const data = {
            name: name,
            phone: phone,
            address: fullAddress,
            email: email, // G·ª¨I EMAIL L√äN SERVER
            paymentMethod: payment,
            order: cart.map(i => i.name).join(", "),
            total: totalStr 
        };

        fetch(WEB_APP_URL, {
            method: 'POST',
            mode: 'no-cors',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        }).then(() => {
            alert("ƒê·∫∑t h√†ng th√†nh c√¥ng!");
            if (payment === "Chuy·ªÉn kho·∫£n") {
                if(confirm("ƒê√£ ghi nh·∫≠n ƒë∆°n! B·∫°n c√≥ mu·ªën m·ªü Form x√°c nh·∫≠n chuy·ªÉn kho·∫£n ngay kh√¥ng?")) {
                    document.getElementById('btn-open-form').click();
                }
            }
            cart = [];
            currentCoupon = ""; // Reset coupon
            document.getElementById('coupon-code').value = "";
            document.getElementById('coupon-msg').innerText = "";
            renderCart();
            toggleCart();
            document.getElementById('c-name').value = '';
            document.getElementById('c-phone').value = '';
            document.getElementById('c-email').value = ''; // Reset √¥ Email
            document.getElementById('c-address').value = '';
            document.getElementById('c-province').value = '';
            btn.innerText = oldText;
            btn.disabled = false;
        }).catch(err => {
            alert("L·ªói k·∫øt n·ªëi!");
            btn.innerText = oldText;
            btn.disabled = false;
        });
    }
</script>
</body>
</html>